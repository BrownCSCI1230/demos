<!DOCTYPE html>
<html lang="en">
<head>
  <title>Additive Colormixing</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="index.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<!--  <script src="res/pixi.min.js"></script>
  <script type="text/javascript" src="app.js"></script> -->
</head>
<body>
<div class="container">
  <div class="row">
    <div class="col-sm-9" id="app">
    <button type="button" class="btn btn-primary" onclick="changeCanvas()">Canvases</button>
    <canvas id="canvas"></canvas>
    </div>
    <div class="col-sm-3">
      <p>Color Components</p>
      <div class="container" id="bars">
      <div class="col-sm-3" id="blackBar">
        <div id="blackColored"></div>
      </div>
      <div class="col-sm-3" id="cyanBar">
        <div id="cyanolored"></div>
      </div>
      <div class="col-sm-3" id="yellowBar">
        <div id="yellowColored"></div>
      </div>
      <div class="col-sm-3" id="magentaBar">
        <div id="magentaColored"></div>
      </div>
      </div>
      <p>Color Selector</p>
     <button onclick="changeBlack()" id="black">
      <img src="images/blackBottleClosed.gif">
     </button>
     <button onclick="changeCyan()" id="cyan">
      <img src="images/cyanBottleClosed.gif">
     </button>
     <button onclick="changeYellow()" id="yellow">
      <img src="images/yellowBottleClosed.gif">
     </button>
     <button onclick="changeMagenta()" id="magenta">
      <img src="images/magentaBottleClosed.gif">
     </button>
      <p>Alpha</p>
      <input type="range" min="1" max="100" value="50" class="slider" id="myRange">
    </div>
  </div>
</div>
</body>
<script>
  var canvas = document.getElementById('canvas');
  var ctx = canvas.getContext('2d');
  var painting = document.getElementById('paint');
  var offset = 120;
    var width = window.innerWidth - 4 * offset;
    var height = window.innerHeight - offset;
  canvas.width = width;
  canvas.height = height;

  var mouse = {x: 0, y: 0};
     
  ctx.fillStyle = "black";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // Show additive color:
  var temp = ctx.getImageData(0, 0, canvas.width, canvas.height);
  console.log(temp);
  var showColor = function(e) {
    var x = e.pageX - 70;
    var y = e.pageY - 30;
    //console.log(x + " " + y);
    var index = (Math.floor(y) * canvas.width + Math.floor(x)) * 4;
    //console.log(index);
    var red = temp.data[index];
    var green = temp.data[index + 1];
    var blue = temp.data[index + 2];
    var blue = temp.data[index + 2];
    //console.log(red);
      if(red == 1 && blue == 1 && green == 1) {
        console.log("woo!")
      }
  }

  canvas.addEventListener('mousemove', showColor, false);

  var img = new Image();
  img.src = "images/cymkColorfieldBackground.jpg";
  img.onload = function () {
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');
      ctx.drawImage(img,width / 4,height / 4);
  };
   
  canvas.addEventListener('mousemove', function(e){
    mouse.x = e.pageX - this.offsetLeft;
    mouse.y = e.pageY - this.offsetTop;
  }, false);

  ctx.fillStyle = "black";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  
  ctx.lineWidth = 3;
  ctx.lineJoin = 'round';
  ctx.lineCap = 'round';
  ctx.strokeStyle = '#ff0000';
 
  canvas.addEventListener('mousedown', function(e) {
      ctx.beginPath();
      ctx.moveTo(mouse.x, mouse.y);
 
    canvas.addEventListener('mousemove', onPaint, false);
}, false);
 
canvas.addEventListener('mouseup', function() {
    canvas.removeEventListener('mousemove', onPaint, false);
}, false);
 
var onPaint = function() {
    ctx.lineTo(mouse.x, mouse.y);
    ctx.stroke();
};

var drawPaint = function(e) {
        ctx.beginPath();
        ctx.moveTo(mouse.x, mouse.y);
        canvas.addEventListener('mousemove', onPaint, false);
} 

var stopPaint = function() {
        canvas.removeEventListener('mousemove', onPaint, false);  
};  

  function changeBlack(e) {
    ctx.strokeStyle = '#000000';
  }
  
  function changeCyan(e) {
    ctx.strokeStyle = '#00ff00';
  }

  function changeYellow(e) {
    ctx.strokeStyle = '#00ff00';
  }

  function changeMagenta(e) {
    ctx.strokeStyle = '#0000ff';
  }

var colorField = true;  
var changeCanvas = function() {
  if(!colorField) {
  ctx.fillStyle = "black";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  var img = new Image();
  img.src = "images/cymkColorfieldBackground.jpg";
  img.onload = function () {
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');
      ctx.drawImage(img,width / 4,height / 4);
  };

  // Disable drawing
  canvas.removeEventListener('mousedown', drawPaint);
  canvas.removeEventListener('mouseup', stopPaint);

  colorField = true;
  } else {

    ctx.fillStyle = "black";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    canvas.addEventListener('mousemove', function(e){
      mouse.x = e.pageX - this.offsetLeft;
      mouse.y = e.pageY - this.offsetTop;
    }, false);
    
  ctx.lineWidth = 3;
  ctx.lineJoin = 'round';
  ctx.lineCap = 'round';
  ctx.strokeStyle = '#ff0000';
   
  canvas.addEventListener('mousedown', drawPaint, false);
   
  canvas.addEventListener('mouseup', stopPaint, false);

  colorField = false;
  }
};

 </script>
</html>
